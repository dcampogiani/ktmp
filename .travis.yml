matrix:
    include:
        - language: swift
            osx_image: xcode11.2
            xcode_project: "native/KotlinIOS/KotlinIOS.xcodeproj"
            xcode_scheme: KotlinIOS
            xcode_destination: platform=iOS Simulator,OS=12.4,name=iPhone XR
            
            script:
                - ./gradlew common:build --console plain
                - xcodebuild clean test -quiet

            after_failure:
                - cat xcodebuild.log

            before_cache:
                - rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
                - rm -fr $HOME/.gradle/caches/*/plugin-resolution/
            cache:
                directories:
                    - $HOME/.gradle/caches/
                    - $HOME/.gradle/wrapper/
                    - $HOME/.android/build-cache
